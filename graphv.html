<!doctype html>
<meta charset="utf-8">

<script src="d3.js"></script>
<script src="d3plus.js"></script>
<div id="viz"></div>

<script>
//reference: http://d3plus.org/examples/advanced/9956853/
  var f = [];
  var id = [];
  var sd = [];
  var edges = [];
  var alen = 0;
  d3.csv("gr2.csv",function(data){  
    console.log(data.length);
    alen = data.length;
    var res = [];
    
    for(var i = 0 , n = data.length;i<n;i++){
        if(data[i]["source"] == data[i]["destination"])continue; 
        var tmp = {} 
        tmp["source"] = data[i]["source"];
        tmp["target"] = data[i]["destination"];
        console.log(tmp);
        edges.push(tmp);
        for(var m in data[i]){
            if (!(data[i][m] in f)){
                f[data[i][m]]=0;
            }
            f[data[i][m]]+=1;
        }
    }
    for(var m in f){
        var tmp ={};
        tmp["name"]=m;
        tmp["size"]=f[m];
        sd.push(tmp);
    }   
    var visualization = d3plus.viz()
        .container("#viz")
        .type("network")
        .data(sd)
        .edges(edges)
        .edges({"arrows": false})
        .size("size")
        .id("name")
        .draw()
  })
</script>
